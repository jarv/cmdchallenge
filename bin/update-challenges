#!/usr/bin/env python
import yaml
import json
from os.path import dirname, join, realpath
from shutil import copyfile

dir_path = dirname(realpath(__file__))
dir_cmdchallenge = join(dir_path, "../cmdrunner")

challenges = yaml.safe_load(open(join(dir_path, "../challenges.yaml")).read())

for challenge in challenges:
    with open(
        join(dir_cmdchallenge, f'ro_volume/ch/{challenge["slug"]}.json'), "w"
    ) as f:
        f.write(json.dumps(challenge))

with open(join(dir_cmdchallenge, "ro_volume/ch/all-challenges.json"), "w") as f:
    f.write(json.dumps([challenge["slug"] for challenge in challenges]))

with open(join(dir_cmdchallenge, "ro_volume/ch/challenges.json"), "w") as f:
    f.write(json.dumps(challenges))

with open(join(dir_path, "../static/challenges/challenges.json"), "w") as f:
    f.write(json.dumps(challenges))
